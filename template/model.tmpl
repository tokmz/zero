{{define "model"}}
// Code generated by github.com/tokmz/zero. DO NOT EDIT.
// Generated at: {{now "2006-01-02 15:04:05"}}

package {{.Package}}

import (
	"context"
	"time"

	"gorm.io/gorm"
)

// {{.ModelName}} {{.Comment}}
type {{.ModelName}} struct {
	{{range .Fields}}
	{{if .Comment}}// {{.Comment}}{{end}}
	{{toCamelCase .Name}} {{.Type}} `{{.Tag}}`
	{{end}}
}

// TableName 表名
func (m *{{.ModelName}}) TableName() string {
	return "{{.TableName}}"
}

// New{{.ModelName}} 创建 {{.ModelName}} 实例
func New{{.ModelName}}() *{{.ModelName}} {
	return &{{.ModelName}}{}
}

// WithContext 设置上下文
func (m *{{.ModelName}}) WithContext(ctx context.Context) *gorm.DB {
	return db.Model(m).WithContext(ctx)
}

// Transaction 事务处理
func (m *{{.ModelName}}) Transaction(ctx context.Context, fn func(tx *gorm.DB) error) error {
	return m.WithContext(ctx).Transaction(fn)
}
{{end}}

